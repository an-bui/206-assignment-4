---
title: "Assignment 4 Report"
author: "An Bui"
date: "11/10/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r set up libraries and data, include = FALSE}
# load packages
library(tidyverse)
library(vcdExtra)

# read in .csv and get in tidy format
abund_master <- read_csv("lobster_size_abundance.csv")
abund <- as.data.frame(abund_master) %>% 
  expand.dft(freq = "COUNT")
traps_master <- read_csv("lobster_traps.csv")
traps <- as.data.frame(traps_master) %>% 
  expand.dft(freq = "TRAPS")

```

#### Ideas:  
1. box and whisker for abundance and fishing pressure (because sample size is so big that median is probably a better indicator of central value than mean)? or jitter?  
2. table of mean lobster sizes  
3. At Isla Vista and Naples Reef, the two protected MPA sites (with zero fishing pressure), how do lobster sizes
in 2012 and 2017 compare? At the non-MPA sites? -> t-test of some kind, 
4. What proportion of observed lobsters at each site are above the legal minimum? Does that proportion differ significantly across the 5 sites? -> chi square

##### 0. exploratory things
```{r summary table, include = FALSE}
abund_table <- abund %>% 
  group_by(SITE) %>% 
  summarize(
    mean_size = mean(SIZE),
    median_size = median(SIZE),
    count = length(SIZE)
  )

abund_table

trap_table <- traps %>% 
  group_by(SITE) %>% 
  filter(SITE == "IVEE" | SITE == "NAPL" | SITE == "AQUE" | SITE == "MOHK" | SITE == "CARP") %>% 
  summarize(
    count = length(SITE)
  )

trap_table
## no surveys at IVEE or NAPL???? am I doing this wrong??
```


##### 1. box and whisker 
```{r abundance histogram, include = FALSE}
# just wanted to see what this looked like
abund_hist <- ggplot(abund, aes(x = SIZE)) +
  geom_histogram() +
  facet_wrap(~ SITE)

abund_hist
```

```{r box and whisker of size by site, include = FALSE}
abund_size_box <- ggplot(abund, aes(x = SITE, y = SIZE)) +
  geom_boxplot()

abund_size_box
```

```{r box and whisker of abundance by site, include = FALSE}
abund_master_clean <- abund_master %>% 
  filter(SIZE != "-99999")
abund_count_box <- ggplot(abund_master_clean, aes(x = SITE, y = COUNT)) +
  geom_boxplot()

abund_count_box
# ok so probably not a box and whisker 
```

```{r jitter of abundance by site, include = FALSE}
abund_count_jitter <- ggplot(abund_master_clean, aes(x = YEAR, y = COUNT)) +
  geom_jitter() +
  facet_wrap(~ SITE)

abund_count_jitter
```




